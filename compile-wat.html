<!DOCTYPE html>
<html>
<head>
    <title>WAT Compiler</title>
</head>
<body>
    <h1>Compiling WAT...</h1>
    <div id="output"></div>

    <script type="application/wasm" src="test-wasm-gc-simple.wat">
        ;; Simple WASM GC struct test
        (module
          ;; Simple struct with one i32 field
          (type $box (struct (field $val (mut i32))))

          ;; Create a box with a value
          (func $makeBox (export "makeBox") (param $v i32) (result (ref $box))
            local.get $v
            struct.new $box
          )

          ;; Get the value from the box
          (func $getValue (export "getValue") (param $b (ref $box)) (result i32)
            local.get $b
            struct.get $box 0
          )

          ;; Set the value in the box
          (func $setValue (export "setValue") (param $b (ref $box)) (param $v i32)
            local.get $b
            local.get $v
            struct.set $box 0
          )
        )
    </script>

    <script>
        // This will trigger the WASM compiler which will create the binary
        document.getElementById('output').textContent = 'Check console for compilation output';
    </script>
</body>
</html>
